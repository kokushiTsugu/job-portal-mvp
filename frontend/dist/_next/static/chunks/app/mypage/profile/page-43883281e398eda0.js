(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92],{5673:(e,l,r)=>{Promise.resolve().then(r.bind(r,1670))},1670:(e,l,r)=>{"use strict";r.r(l),r.d(l,{default:()=>s});var a=r(5155),t=r(2115),o=r(6046);function s(){let[e,l]=(0,t.useState)({name:"",email:"",resumeUrl:"",telegramId:"",phone:"",linkedinUrl:"",githubUrl:"",portfolioUrl:""}),[r,s]=(0,t.useState)("");(0,o.useRouter)(),(0,t.useEffect)(()=>{let e=localStorage.getItem("token"),r=localStorage.getItem("userName"),a=localStorage.getItem("userEmail"),t=localStorage.getItem("userResumeUrl");if(!e){s("ログインが必要です。");return}l(e=>({...e,name:r||"",email:a||"",resumeUrl:t||""}))},[]);let n=["resumeUrl","telegramId","phone","linkedinUrl","githubUrl","portfolioUrl"],d=Math.round(n.reduce((l,r)=>{let a=e[r];return a&&""!==a.trim()?l+1:l},0)/n.length*100),m=e=>{let{name:r,value:a}=e.target;l(e=>({...e,[r]:a}))},i=async l=>{l.preventDefault(),s("");let r=localStorage.getItem("token");if(!r){s("ログインが必要です。");return}try{let l=await fetch("http://localhost:8080/user",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(e)}),a=await l.json();if(!l.ok)throw Error(a.message||"ユーザー情報更新に失敗しました");s("ユーザー情報が更新されました！"),localStorage.setItem("userName",a.data.name),localStorage.setItem("userEmail",a.data.email||""),localStorage.setItem("userResumeUrl",a.data.resumeUrl||"")}catch(e){s("エラー: ".concat(e.message))}};return(0,a.jsx)("div",{className:"min-h-screen p-8",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-extrabold mb-6 text-center text-gray-800",children:"プロフィール編集"}),r&&(0,a.jsx)("p",{className:"text-center text-red-500 mb-4",children:r}),(0,a.jsxs)("p",{className:"mb-4 font-semibold text-gray-700",children:["プロフィール充実度: ",d,"%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-300 rounded-full h-4 mb-6",children:(0,a.jsx)("div",{className:"bg-green-500 h-4 rounded-full",style:{width:"".concat(d,"%")}})}),(0,a.jsxs)("form",{onSubmit:i,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-1 font-semibold",htmlFor:"name",children:"名前"}),(0,a.jsx)("input",{type:"text",name:"name",id:"name",className:"w-full p-2 border border-gray-300 rounded",value:e.name,onChange:m,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-1 font-semibold",htmlFor:"email",children:"メールアドレス"}),(0,a.jsx)("input",{type:"email",name:"email",id:"email",className:"w-full p-2 border border-gray-300 rounded",value:e.email,onChange:m,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-1 font-semibold",htmlFor:"resumeUrl",children:"履歴書URL"}),(0,a.jsx)("input",{type:"text",name:"resumeUrl",id:"resumeUrl",className:"w-full p-2 border border-gray-300 rounded",value:e.resumeUrl||"",onChange:m,placeholder:"https://example.com/resume.pdf"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-1 font-semibold",htmlFor:"telegramId",children:"Telegram ID"}),(0,a.jsx)("input",{type:"text",name:"telegramId",id:"telegramId",className:"w-full p-2 border border-gray-300 rounded",value:e.telegramId||"",onChange:m,placeholder:"@your_telegram_id"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-1 font-semibold",htmlFor:"phone",children:"電話番号"}),(0,a.jsx)("input",{type:"text",name:"phone",id:"phone",className:"w-full p-2 border border-gray-300 rounded",value:e.phone||"",onChange:m,placeholder:"090-XXXX-XXXX"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-1 font-semibold",htmlFor:"linkedinUrl",children:"LinkedIn URL"}),(0,a.jsx)("input",{type:"url",name:"linkedinUrl",id:"linkedinUrl",className:"w-full p-2 border border-gray-300 rounded",value:e.linkedinUrl||"",onChange:m,placeholder:"https://www.linkedin.com/in/your-profile"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-1 font-semibold",htmlFor:"githubUrl",children:"GitHub URL"}),(0,a.jsx)("input",{type:"url",name:"githubUrl",id:"githubUrl",className:"w-full p-2 border border-gray-300 rounded",value:e.githubUrl||"",onChange:m,placeholder:"https://github.com/yourname"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-1 font-semibold",htmlFor:"portfolioUrl",children:"ポートフォリオURL"}),(0,a.jsx)("input",{type:"url",name:"portfolioUrl",id:"portfolioUrl",className:"w-full p-2 border border-gray-300 rounded",value:e.portfolioUrl||"",onChange:m,placeholder:"https://your-portfolio.com"})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded mt-4",children:"更新"})]})]})})}},6046:(e,l,r)=>{"use strict";var a=r(6658);r.o(a,"useParams")&&r.d(l,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(l,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(l,{useRouter:function(){return a.useRouter}})}},e=>{var l=l=>e(e.s=l);e.O(0,[441,517,358],()=>l(5673)),_N_E=e.O()}]);